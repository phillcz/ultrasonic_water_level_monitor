# 433MHz Water Tank Level Monitor

This repository contains description of the 433 Mhz protocol used by a ultrasonic water level meter. The meter is sold on aliexpress under different names, it has no code or labels.

Seller's description: "433MHz Ultrasonic Wireless Water Tank Liquid Depth Level Meter Sensor Indicator with Temperature Display Time Alarm Transmitter"

Search for https://www.aliexpress.com/w/wholesale-ultrasonic-wireless-water-tank-level-monitor.html

![ultrasonic_monitor_1](https://raw.githubusercontent.com/phillcz/ultrasonic_water_level_monitor/master/img/ultrasonic_monitor_1.jpg)
![ultrasonic_monitor_2](https://raw.githubusercontent.com/phillcz/ultrasonic_water_level_monitor/master/img/ultrasonic_monitor_2.jpg)
![ultrasonic_monitor_3](https://raw.githubusercontent.com/phillcz/ultrasonic_water_level_monitor/master/img/ultrasonic_monitor_3.jpg)


## About hw
Each power off&on of the transmitter generates a unique id to allow the use of multiple units. The id is used in all transmissions.
After powering on a receiver it will pair with the first detected id.

## Measurements
Transmitter sends temperature and distance readings every 3 minutes. A red led on the transmitter indicates measurement and transmission.
Minimum measured depth is 32cm, maximum (not verified) is around 15m.

## 433 MHz Code
Code is 72 bits long. I'm using 71 bits (from raising to raising edge).

```
00000001111111122222222333333334444444455555555666666667777777788888888
sssssssiiiiiiii________________________tttt0000TTTTTT__________CCCCCCCC
10111111110111110001000010000000000000110100000110101000000000000001101
s - synchronization [0x5F]
i - id of transmitter (changes with each power off&on)
C = checksum - xor of bytes, 1st byte has only 7 bits
```

### Temperature
```
00000001111111122222222333333334444444455555555666666667777777788888888
sssssssiiiiiiii________________________tttt0000TTTTTT__________CCCCCCCC______________TTTTTT____tttt_TTTTTTtttt_dec-400
10111111110111110001000010000000000000100110000011011000000000000100101 47.6 117.68F 11011000001100 1101101100 876-400=476
10111111110111110001000010000000000000111000000110011000000000001110101 41.9 107.42F 11001100000011
10111111110111110001000010000000000000100000000100011000000000011110101 38.4 101.12F 11000100000000
10111111110111110001000010000000000000110000000111101000000000000001101 35.3         10111100000001
10111111110111110001000010000000000000110110000101101000000000001111101 33.3         10110100001101
10111111110111110001000010000000000000111110000001101000000000010111101 31.9         10110000001111
10111111110111110001000010000000000000111000000001101000000000010001101 30.7         10110000000011
10111111110111110001000010000000000000111010000110101000000000001111101 29.9         10101100001011
10111111110111110001000010000000000000110100000110101000000000000001101 29.3         10101100000101
10111111110111110001000010000000000000111110000010101000000000011011101 28.7         10101000001111
10111111110111110001000010000000000000110100000010101000000000010001101 28.1         10101000000101
10111111110111110001000010000000000000110000000010101000000000010101101 27.3         10101000000001
10111111110111110001000010000000000000111010000100101000000000000111101 26.7         10100100001011
10111111110111110001000010000000000000110010000100101000000000001111101 26.5 79.70   10100100001001 1010011001 665-400=265
10111111110111110001000010000000000000100010000100101000000000011111101 26.4 79.52   10100100001000 1010011000 664-400=264
10111111110111110001000010000000000000111100000100101000000000000001101 26.3 79.34   10100100000111 1010010111 663-400=263
10111111110111110001000010000000000000101100000100101000000000010001101 26.2         10100100000110 1010010110 662-400=262
10111111110111110001000010000000000000111010000111001000000000001001101 23.5         10011100001011
10111111110111110001000010000000000000101100000001001000000000000111101 18.2         10010000000110
10111111110111110001000010000000000000101010000010001000000000001101101 15.4         10001000001010
10111111110111110001000010000000000000100000000100001000000000011111101 12.8         10000100000000
10111111110111110001000010000000000000111110000101110000000000000110001 7.9          01110100001111
10111111110111110001000010000000000000100110000101110000000000011110001 7.6          01110100001100
10111111110111110001000010000000000000100110000001110000000000001110001 6.0  42.8F   01110000001100 0111001100 460-400=60
temperature = (TTTTTTtttt - 400) / 100
```

### Distance

```
00000001111111122222222 333333 33 4444 444455555555666666667777777788888888
sssssssiiiiiiii________ EFGHIJ -- ABCD ____tttt0000TTTTTT__________CCCCCCCC____________________________________
10111111110111110001000 010000 00 0000 000100110000001110000000000001110001  0cm ---- ---
10111111110111110001000 010000 00 1000 000100010000111001000000000000001101 9.67  33 0000100001
10111111110111110001000 010000 00 1100 000100010000111001000000000001001101 9.65  35 1100..0011..3
10111111110011010001000 010000 00 0010 000111100000000101000000000010100100 9.64  36 0010..0100..4
10111111110011010001000 010000 00 1101 000110100000000101000000000000010100 9.57  43 0000101011
10111111110011010001000 110000 00 1100 000110010000000101000000000010110100 9.49  51 110011
10111111110011010001000 110000 00 0001 000110100000000101000000000001010100 9.44  56 111000
10111111110111110001000 110000 00 0101 000100010001111001000000000001011100 9.42  58 111010
10111111110111110001000 001000 00 1110 000111100001111001000000000011111100 9.29  71 1000111
10111111101011110001000 100100 00 1100 000100100000000101000000000001100101 8.53 147 10010011
10111110100111010001000 100100 00 0101 000100100000000101000000000001101100 8.46 154 0010011010
10111110100111010001000 010100 00 0001 000101100000000101000000000010101100 8.32 168 0010101000
10111111110111110001000 010100 00 0111 000100110000111001000000000011001101 8.26 174 0010101110
10111110100111010001000 110100 00 1000 000101100000000101000000000010111100 8.23 177 0010110001
10111111110011010001000 001010 00 0101 000110100001000101000000000011111101 6.70 330 0101001010
10111110100111010001000 011101 11 0111 000101100000000101000000000011101011 6.25 375 1011101110
10111111110011010001000 000001 00 1000 000110100000111001000000000011110000 4.87 513 1000000001
distance = JIHGFEDCBA
```
